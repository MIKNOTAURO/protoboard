<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:xi="http://www.w3.org/2001/XInclude">
 
 
<head>
    <meta http-equiv="content-type" content="application/xhtml+xml; charset=utf-8" />
    <link rel="stylesheet" type="text/css" href="{{MEDIA_URL}}bluehaze.css" title="Blue Haze stylesheet" />
    <link rel="stylesheet" type="text/css" href="{{MEDIA_URL}}color-scheme.css" title="Blue Haze stylesheet" />
	<style type="text/css">
        .commentForm {float:left;
                      width:400px;   }
        .content {margin-top:80px;}
        .ratings {float:left;
                     width:300px;    }
        .navMenu {float:left;}
		.rating-L {width: 500px;}
		#rat > * {float: left; line-height: 1.4em;}
        #rat {float: left;}
		#rating_title {padding-right: .5em;}
		#messages {padding-left: .5em; }
        #caption {padding-left: .5em; float: left;}

		#messages {color: #fd1c24;}
	</style>

<!-- demo page js -->
	<script type="text/javascript" src="{{MEDIA_URL}}js/jquery.min.js?v=1.4.2"></script>
	<script type="text/javascript" src="{{MEDIA_URL}}js/jquery-ui.custom.min.js?v=1.8"></script>

	<!-- Star Rating widget stuff here... -->
	<script type="text/javascript" src="{{MEDIA_URL}}js/jquery.ui.stars.js?v=3.0.0b38"></script>

    <link rel="stylesheet" type="text/css" href="{{MEDIA_URL}}css/jquery.ui.stars.css?v=3.0.0b38"/>
      <title>
         {% block title %} Protoboard (Alpha) {% endblock %}
      </title>


    <script type="text/javascript">

        $('html').ajaxSend(function(event, xhr, settings) {
    function getCookie(name) {
        var cookieValue = null;
        if (document.cookie && document.cookie != '') {
            var cookies = document.cookie.split(';');
            for (var i = 0; i < cookies.length; i++) {
                var cookie = jQuery.trim(cookies[i]);
                // Does this cookie string begin with the name we want?
                if (cookie.substring(0, name.length + 1) == (name + '=')) {
                    cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                    break;
                }
            }
        }
        return cookieValue;
    }
    if (!(/^http:.*/.test(settings.url) || /^https:.*/.test(settings.url))) {
        // Only send the token to relative URLs i.e. locally.
        xhr.setRequestHeader("X-CSRFToken", getCookie('csrftoken'));
    }
});

        $(function(){
            $("#rat").children().not("select, #rating_title").hide();

            // Create caption element
            var $caption = $('<div id="caption"/>');

            // Create stars
            $("#rat").stars({
                inputType: "select",
                oneVoteOnly: true,
                captionEl: $caption,
                callback: function(ui, type, value)
                {
                    // Display message to the user at the begining of request
                    $("#messages").text("Guardando...").fadeIn(30);

                    // Send request to the server using POST method
                    /* NOTE:
                        The same PHP script is used for the FORM submission when Javascript is not available.
                        The only difference in script execution is the returned value.
                        For AJAX call we expect an JSON object to be returned.
                        The JSON object contains additional data we can use to update other elements on the page.
                        To distinguish the AJAX request in PHP script, check if the $_SERVER['HTTP_X_REQUESTED_WITH'] header variable is set.
                        (see: demo4.php)
                    */
                    var activity_uri = $("#commentForm1").attr("action");

                    $.post("/ajax_vote"+activity_uri, {rate: value}, function(json)
                    {
                        // Change widget's title
                        $("#rating_title").text("Calificación promedio:");

                        // Select stars from "Average rating" control to match the returned average rating value
                        ui.select(Math.round(json.avg));

                        // Update widget's caption
                        $caption.text(json.avg +"," + json.votes + " voto(s);");

                        // Display confirmation message to the user
                        $("#messages").text("Calificación guardada (" + value + "). Gracias!").stop().css("opacity", 1).fadeIn(30);

                        // Hide confirmation message after 2 sec...
                        setTimeout(function(){
                            $("#messages").fadeOut(800)
                        }, 2000);

                    }, "json");
                }
            });

            // Since the <option value="3"> was selected by default, we must remove this selection from Stars.
            $("#rat").stars("selectID", -1);

            // Append caption element !after! the Stars
            $caption.appendTo("#rat");

            // Create element to use for confirmation messages
            $('<div id="messages"/>').appendTo("#rat");
        });
    </script>
	

</head>
 

<body>

    <!--  <div id="top">${email}</div> -->
    <!-- ###### Header ###### -->

    <div id="header">
      <span class="headerTitle">Programación Orientada a Objetos</span>
    
      <div class="menuBar">
        <a href="/">Principal</a>|
        <a href="/logout">Terminar la Sesión</a>
      </div>
    
    </div>
    
{% if navegation %}
        <div class="sideBox LHS">
            <div class="sideHeader">Navegación</div>
              <!-- <div id="navcontainer">-->
                   {{navegation|safe}}
              <!-- </div>-->
        </div>
{% endif %}

    {% if user.username %}

    <div class="sideBox LHS">
      <div class="sideHeader">Estilo de Aprendizaje</div>
      
      <span> <strong> {{user.username}} </strong>   según el cuestionario que resolviste este es tu estilo de aprendizaje.</span>
      <img src="{{lsi_graphic}}" alt="Estilo de Aprendizaje"  />
    {% endif %}


        
   
    </div>
    
     
    <div class="sideBox LHS">
     <div class="sideHeader">Se agradece tu ayuda!</div>
     <span>
        
        Esta página es un prototipo de investigación, tus comentarios
        son muy importantes para la evaluación del sistema. Como todo
        prototipo es <strong>muy</strong> probable que fallen algunas cosas,
        <strong>Gracias</strong> por tu paciencia y retroalimentación.
        
     </span>
    </div>    
        
    </py:if>
    
    
    
     <div id="bodyText">
      {% block content %}
       <!--
       
       {{content|safe}}
       
       -->
      {% endblock content %}  
      
     </div>

<!-- ###### Footer ###### -->

    <div id="footer">
      <div class="footerLHS">
        <a href="http://validator.w3.org/check/referer">Valid XHTML 1.0 Strict</a>
      </div>
      
      <div class="footerLHS">
        <a href="http://jigsaw.w3.org/css-validator/check/referer">Valid CSS 2</a>
      </div>
      
      <div>
        http://www.oswd.org/design/1112/bluehaze/index.html
      </div>
      
      <div>
        Website designed by <a href="http://www.oswd.org/email.phtml?user=haran"
        title="Email author">haran</a>
      </div>
      <img src="http://www.python.org/community/logos/python-powered-w-100x40.png" alt="Python Powered" />   
  <!--
  <script type="text/javascript" src="/lo"></script>
  -->    
    </div>
  </body>


</html>